---
- name: Generate simple text artifacts for AWX download
  hosts: localhost
  connection: local
  vars:
    artifact_dir: "/var/lib/awx/public/artifacts"
    artifact_file: "sample_artifact.txt"
  tasks:
    - name: Ensure artifact directory exists
      ansible.builtin.file:
        path: "{{ artifact_dir }}"
        state: directory
        mode: '0755'
      become: true

    - name: Create simple text artifact
      ansible.builtin.copy:
        content: |
          Sample Text Artifact
          Generated by Ansible on {{ ansible_date_time.iso8601 }}
          This is a simple text file for demonstration purposes.
        dest: "{{ artifact_dir }}/{{ artifact_file }}"
        mode: '0644'
      become: true

    - name: Output artifact location
      ansible.builtin.debug:
        msg: "Artifact created at {{ artifact_dir }}/{{ artifact_file }} and is available for download from AWX"
